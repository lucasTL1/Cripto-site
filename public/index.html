<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criptomoeda</title>
    <link rel="stylesheet" href="./src/styles.css">
</head>
<body>
    <div id="root">
        <nav>
            <a href="javascript:void(0);" onclick="showSection('Home')">Home</a>
            <a href="javascript:void(0);" onclick="showSection('wiki')">Wiki</a>
        </nav>

        <section id="wiki" class="wiki" style="display: none;">
            <h1>Wiki Section</h1>
            <div class="content">
                
                
            </div>
        </section>

        <section id="hash-api" class="hash-api">
            <h1>Gerador de Hash</h1>
            <p>Digite um texto para gerar seu hash:</p>
            <input type="text" id="text-input" placeholder="Digite aqui..." />
            <button id="generate-hash-btn">Gerar Hash</button>
            <div id="hash-result"></div>
        </section>

        <footer>
            <p>&copy; 2025 Your Stylish Site. All rights reserved.</p>
        </footer>

        <script>
            // URL da API (ajuste para o endereço correto se necessário)
            const API_URL = "http://127.0.0.1:8080/hash/";

            document.getElementById("generate-hash-btn").addEventListener("click", async () => {
                const inputText = document.getElementById("text-input").value;

                if (!inputText) {
                    alert("Por favor, insira um texto.");
                    return;
                }

                try {
                    // Fazer a requisição para a API
                    const response = await fetch(`${API_URL}${encodeURIComponent(inputText)}`);
                    if (!response.ok) {
                        throw new Error("Erro ao conectar com a API.");
                    }

                    const data = await response.json();

                    // Exibir o resultado na página
                    document.getElementById("hash-result").innerHTML = `
                        <p><strong>Texto:</strong> ${data.input}</p>
                        <p><strong>Hash:</strong> ${data.hash}</p>
                    `;
                } catch (error) {
                    console.error("Erro:", error);
                    alert("Ocorreu um erro ao gerar o hash. Veja o console para mais detalhes.");
                }
            });

            // Função para alternar entre seções
            function showSection(sectionId) {
                const sections = document.querySelectorAll('section');
                sections.forEach(section => {
                    section.style.display = 'none';
                });
                document.getElementById(sectionId).style.display = 'block';
            }

            // Exibir a seção "Home" por padrão
            showSection('hash-api');
        </script>
    </div>

    <script src = "index.js">
        // Função para gerar hash SHA-256
        function generateHash(text) {
            const encoder = new TextEncoder();
            const data = encoder.encode(text);
            return crypto.subtle.digest('SHA-256', data).then(hashBuffer => {
                const hashArray = Array.from(new Uint8Array(hashBuffer));
                const hashHex = hashArray.map(byte => byte.toString(16).padStart(2, '0')).join('');
                return hashHex;
            });
        }

        document.getElementById("generate-hash-btn").addEventListener("click", async () => {
            const inputText = document.getElementById("text-input").value;

            if (!inputText) {
                alert("Por favor, insira um texto.");
                return;
            }

            try {
                // Gerar hash no lado do cliente
                const hash = await generateHash(inputText);

                // Exibir o resultado na página
                document.getElementById("hash-result").innerHTML = `
                    <p><strong>Texto:</strong> ${inputText}</p>
                    <p><strong>Hash:</strong> ${hash}</p>
                `;
            } catch (error) {
                console.error("Erro:", error);
                alert("Ocorreu um erro ao gerar o hash.");
            }
        });

        // Função para alternar entre seções
        function showSection(sectionId) {
            const sections = document.querySelectorAll('section');
            sections.forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(sectionId).style.display = 'block';
        }

        // Exibir a seção "Home" por padrão
        showSection('hash-api');
    </script>
</body>
</html>
